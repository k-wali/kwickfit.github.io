{% extends 'sidebar_dashboard.html' %}
{% block page_content %}
<div id="content">
    {% include 'includes/header.html' %}
    <div class="main-content">
        <div class="card" style="min-height: 285px">
            <div class="col-lg-12 col-md-12">
                <div class="content-section">
                    <form method="POST" action="">
                        {{ form.hidden_tag() }}
                        <fieldset class="form-group">
                            <legend class="border-bottom mb-4">{{ legend }}</legend>
                            <div class="content-section row g-3">
                                <div class="form-group col-md-2">
                                    {{ form.regplate.label(class="form-control-label form-control-sm") }}
                                    {% if form.regplate.errors %}
                                    {{ form.regplate(class="form-control form-control-sm is-invalid",
                                    onkeyup="regplateuppercase()",placeholder="(e.g AAA-123456)", maxlength="7") }}
                                    <div class="invalid-feedback">
                                        {% for error in form.regplate.errors %}
                                        <span>{{ error }}</span>
                                        {% endfor %}
                                    </div>
                                    {% else %}
                                    {{ form.regplate(class="form-control form-control-sm",
                                    onkeyup="regplateuppercase()", placeholder="(e.g AAA-123)", maxlength="10") }}
                                    {% endif %}
                                </div>
                                <div class="form-group col-md-2">
                                    {{ form.regdate.label(class="form-control-label form-control-sm") }}
                                    {% if form.regdate.errors %}
                                    {{ form.regdate(class="form-control form-control-sm is-invalid", type="date") }}
                                    <div class="invalid-feedback">
                                        {% for error in form.regdate.errors %}
                                        <span>{{ error }}</span>
                                        {% endfor %}
                                    </div>
                                    {% else %}
                                    {{ form.regdate(class="form-control form-control-sm", type="date") }}
                                    {% endif %}
                                </div>
                                <div class="form-group col-md-3">
                                    {{ form.ownername.label(class="form-control-label form-control-sm") }}
                                    {% if form.ownername.errors %}
                                    {{ form.ownername(class="form-control form-control-sm is-invalid") }}
                                    <div class="invalid-feedback">
                                        {% for error in form.ownername.errors %}
                                        <span>{{ error }}</span>
                                        {% endfor %}
                                    </div>
                                    {% else %}
                                    {{ form.ownername(class="form-control form-control-sm") }}
                                    {% endif %}
                                </div>
                                <div class="form-group col-md-1.5">
                                    {{ form.vbodycolor.label(class="form-control-label form-control-sm") }}
                                    {% if form.vbodycolor.errors %}
                                    {{ form.vbodycolor(class="form-control form-control-sm is-invalid") }}
                                    <div class="invalid-feedback">
                                        {% for error in form.vbodycolor.errors %}
                                        <span>{{ error }}</span>
                                        {% endfor %}
                                    </div>
                                    {% else %}
                                    {{ form.vbodycolor(class="form-control form-control-sm") }}
                                    {% endif %}
                                </div>
                                <div class="form-group col-md-4">
                                    {{ form.vengineno.label(class="form-control-label form-control-sm") }}
                                    {% if form.vengineno.errors %}
                                    {{ form.vengineno(class="form-control form-control-sm is-invalid",
                                    onkeyup="venginenouppercase()")
                                    }}
                                    <div class="invalid-feedback">
                                        {% for error in form.vengineno.errors %}
                                        <span>{{ error }}</span>
                                        {% endfor %}
                                    </div>
                                    {% else %}
                                    {{ form.vengineno(class="form-control form-control-sm",
                                    onkeyup="venginenouppercase()")
                                    }}
                                    {% endif %}
                                </div>
                                <div class="form-group col-md-2">
                                    {{ form.vtaxexpire.label(class="form-control-label form-control-sm") }}
                                    {% if form.vtaxexpire.errors %}
                                    {{ form.vtaxexpire(class="form-control form-control-sm is-invalid", type="date") }}
                                    <div class="invalid-feedback">
                                        {% for error in form.vtaxexpire.errors %}
                                        <span>{{ error }}</span>
                                        {% endfor %}
                                    </div>
                                    {% else %}
                                    {{ form.vtaxexpire(class="form-control form-control-sm", type="date") }}
                                    {% endif %}
                                </div>
                                <div class="form-group col-md-2">
                                    {{ form.vinsurance.label(class="form-control-label form-control-sm") }}
                                    {% if form.vinsurance.errors %}
                                    {{ form.vinsurance(class="form-control form-control-sm is-invalid") }}
                                    <div class="invalid-feedback">
                                        {% for error in form.vinsurance.errors %}
                                        <span>{{ error }}</span>
                                        {% endfor %}
                                    </div>
                                    {% else %}
                                    {{ form.vinsurance(class="form-control form-control-sm") }}
                                    {% endif %}
                                </div>

                                <div class="form-group col-md-2">
                                    {{ form.vmake.label(class="form-control-label form-control-sm") }}
                                    {% if form.vmake.errors %}
                                    {{ form.vmake(class="form-control form-control-sm is-invalid") }}
                                    <div class="invalid-feedback">
                                        {% for error in form.vmake.errors %}
                                        <span>{{ error }}</span>
                                        {% endfor %}
                                    </div>
                                    {% else %}
                                    {{ form.vmake(class="form-control form-control-sm") }}
                                    {% endif %}
                                </div>
                                <div class="form-group col-md-2">
                                    {{ form.vmakemodel.label(class="form-control-label form-control-sm") }}
                                    {% if form.vmakemodel.errors %}
                                    {{ form.vmakemodel(class="form-control form-control-sm is-invalid") }}
                                    <div class="invalid-feedback">
                                        {% for error in form.vmakemodel.errors %}
                                        <span>{{ error }}</span>
                                        {% endfor %}
                                    </div>
                                    {% else %}
                                    {{ form.vmakemodel(class="form-control form-control-sm") }}
                                    {% endif %}
                                </div>
                                <div class="form-group col-md-2">
                                    {{ form.vmodelyear.label(class="form-control-label form-control-sm") }}
                                    {% if form.vmodelyear.errors %}
                                    {{ form.vmodelyear(class="form-control form-control-sm is-invalid") }}
                                    <div class="invalid-feedback">
                                        {% for error in form.vmodelyear.errors %}
                                        <span>{{ error }}</span>
                                        {% endfor %}
                                    </div>
                                    {% else %}
                                    {{ form.vmodelyear(class="form-control form-control-sm") }}
                                    {% endif %}
                                </div>
                                <div class="form-group col-md-2">
                                    {{ form.vbodytype.label(class="form-control-label form-control-sm") }}
                                    {% if form.vbodytype.errors %}
                                    {{ form.vbodytype(class="form-control form-control-sm is-invalid") }}
                                    <div class="invalid-feedback">
                                        {% for error in form.vbodytype.errors %}
                                        <span>{{ error }}</span>
                                        {% endfor %}
                                    </div>
                                    {% else %}
                                    {{ form.vbodytype(class="form-control form-control-sm") }}
                                    {% endif %}
                                </div>
                            </div>
                        </fieldset>
                        <div class="form-group">
                            {{ form.submit(class="btn btn-outline-info") }}
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="card" style="min-height: 285px">
            <fieldset class="form-group">
                <legend class="border-bottom mb-4">{{ legendright }}</legend>
                <table class="table">
                    <thead>
                        <tr>
                            <th scope="col">No.</th>
                            <th scope="col">Reg Plate</th>
                            <th scope="col">Make</th>
                            <th scope="col">Model</th>
                            <th scope="col">Year</th>
                            <th scope="col">Body type</th>
                            <th scope="col">Amount</th>
                        </tr>
                    </thead>
                    {% for vehiclelist in vehiclelists %}
                    <tbody>
                        <tr>
                            <th scope="row">{{loop.index}}</th>
                            <td><a class="article-title" href="#">{{vehiclelist.reg_plate}}</a></td>
                            <td>{{vehiclelist.v_makes}}</td>
                            <td>{{vehiclelist.v_make_models}}</td>
                            <td>{{vehiclelist.v_years}}</td>
                            <td>{{vehiclelist.v_body_types}}</td>
                            <td><a class="article-title" href="#">36000</a></td>

                        </tr>
                    </tbody>
                    {% endfor %}
                </table>
            </fieldset>
        </div>
    </div>
</div>
<script>
    vmake_select = document.getElementById('vmake');
    vmakemodel_select = document.getElementById('vmakemodel');
    vbodytype_select = document.getElementById('vbodytype');

    vmake_select.onchange = function () {
        vmakeid = vmake_select.value;
        vbodytype_select.value = "";
        fetch('/vmakemodel/' + vmakeid).then(function (response) {
            response.json().then(function (data) {
                optionHTML = '';
                for (vmakemodels of data.vmakmodellist) {
                    optionHTML += '<option value="' + vmakemodels.id + '">' + vmakemodels.makemodel + '</option>'
                }
                vmakemodel_select.innerHTML = optionHTML;
            });
        });
    }
    vmakemodel_select.onchange = function () {
        vbodytype_select.value = "";
    }

    function regplateuppercase() {
        let x = document.getElementById("regplate");
        x.value = x.value.toUpperCase();
    }
    function venginenouppercase() {
        let x = document.getElementById("vengineno");
        x.value = x.value.toUpperCase();
    }
</script>

{% endblock page_content %}
{% block page_script %}
<script type="text/javascript">
    $(document).ready(function () {
        $('#sidebarCollapse').on('click', function () {
            $('#sidebar').toggleClass('active');
            $('#content').toggleClass('active');
        });
        $('.more-button,.body-overlay').on('click', function () {
            $('#sidebar,.body-overlay').toggleClass('show-nav');
        });
    });
</script>
{% endblock page_script %}